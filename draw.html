<html>
  <style>
    body{ 
      font-size: 15pt;
      font-family: arial;
    }

    .container{
		position: relative; 
	}

	.container canvas{
		position: absolute;
		left: 0;
		top: 0;
	}
  </style>


<body>
  <h1>Fix your photo</h1>

<label>Select Image:</label><br/>
<input type="file" id="imageLoader" name="imageLoader"/>


<div class="container">
	<canvas id="upload_pic" width="500" height="500"></canvas> 
	<canvas id="draw" width="500" height="500"></canvas>
</div>








<script src="myscript.js"  type="text/javascript">
 </script> 


<script>
  var canvas = document.querySelector('#draw'); // define a canvas object(ctx)
  // could be 3d, if you want to make a video game
  var ctx = canvas.getContext('2d');
  //canvas.width = 300
  //canvas.height = 300
  //canvas.width = window.innerWidth; // same width & height using the window property 
  //canvas.height = window.innerHeight;
  
  // shape the line 
  ctx.lineJoin = 'round';  //Sets or returns the type of corner created, when two lines meet
  ctx.lineCap = 'round'; //Sets or returns the style of the end caps for a line
  ctx.lineWidth = 20; //current line width
  ctx.strokeStyle = '#ac0000'; //Sets or returns the color, gradient, or pattern used for strokes

  // the draw functionality 
  // establishing four event listeners. We need to know when the mouse is pressed down, up, moved, or clicked off the page. 
  
  let isDrawing = false; // track our mouse movements, we need a boolean variable. 
  let lastX = 0;
  let lastY = 0;

  // pass through an event listener
  function draw(e) {
    // stop the function if they are not mouse down
    if(!isDrawing) return;
    //listen for mouse move event

    console.log(e);

    ctx.beginPath(); //Begins a path, or resets the current path
    ctx.moveTo(lastX, lastY); //Moves the path to the specified point in the canvas, without creating a line
    ctx.lineTo(e.offsetX, e.offsetY); //Adds a new point and creates a line to that point from the last specified point in the canvas
    ctx.stroke(); //Actually draws the path you have defined
    [lastX, lastY] = [e.offsetX, e.offsetY]; // return the xy coordinate of the mouse pointer 
    console.log(lastX)
    console.log(lastY)
    console.log(ctx.lineWidth)
  }

  canvas.addEventListener('mousedown', (e) => { //occurs when press the mouse
    isDrawing = true;
    [lastX, lastY] = [e.offsetX, e.offsetY]; //returns the x-coordinate of the mouse pointer, relative to the target element.
  });
  // element.addEventListener(event, function, useCapture)
  canvas.addEventListener('mousemove', draw);   //occurs whenever the mouse is moving (no click)
  											// as long as move the mouse, we will run draw function 


  canvas.addEventListener('mouseup', () => isDrawing = false); //occurs when release the mouse 
  canvas.addEventListener('mouseout', () => isDrawing = false); // (no click) occurs when the mouse pointer leaves the selected element.
</script>





</body>


</html>
